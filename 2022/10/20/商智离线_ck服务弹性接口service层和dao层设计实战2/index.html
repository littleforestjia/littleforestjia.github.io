<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







  

<link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/32x32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/16x16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Mybatis," />










<meta name="description" content="商智离线_ck服务弹性接口service层和dao层设计实战21.背景在ck等olap数据服务层，为了抽象化我们创建的接口，扩展接口的可服用性，我们一般会把接口设计成弹性接口。弹性接口的意思就是，传入的维度参数列表是可选的、可变的，传出的指标数据列表也是可选的、可变的。 如下表所描述的一个接口为例来对弹性接口进行理解：    serviceName getBrandIndBrandRank">
<meta property="og:type" content="article">
<meta property="og:title" content="商智离线_ck服务弹性接口service层和dao层设计实战2">
<meta property="og:url" content="http://https//littleforestjia.github.io/2022/10/20/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%982/index.html">
<meta property="og:site_name" content="岩手县小森的博客">
<meta property="og:description" content="商智离线_ck服务弹性接口service层和dao层设计实战21.背景在ck等olap数据服务层，为了抽象化我们创建的接口，扩展接口的可服用性，我们一般会把接口设计成弹性接口。弹性接口的意思就是，传入的维度参数列表是可选的、可变的，传出的指标数据列表也是可选的、可变的。 如下表所描述的一个接口为例来对弹性接口进行理解：    serviceName getBrandIndBrandRank">
<meta property="og:image" content="http://littleforestjia.github.io/2022/10/20/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%982/1.png">
<meta property="article:published_time" content="2022-10-19T16:00:00.000Z">
<meta property="article:modified_time" content="2023-03-20T15:01:22.341Z">
<meta property="article:author" content="zju岩手县小森">
<meta property="article:tag" content="Mybatis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://littleforestjia.github.io/2022/10/20/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%982/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://https://littleforestjia.github.io/2022/10/20/商智离线_ck服务弹性接口service层和dao层设计实战2/"/>





  <title>商智离线_ck服务弹性接口service层和dao层设计实战2 | 岩手县小森的博客</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">岩手县小森的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">努力将眼前的每一天过得精彩</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://https://littleforestjia.github.io/2022/10/20/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%982/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zju岩手县小森">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="岩手县小森的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">商智离线_ck服务弹性接口service层和dao层设计实战2</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-10-20T00:00:00+08:00">
                2022-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF/" itemprop="url" rel="index">
                    <span itemprop="name">商智离线</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="商智离线-ck服务弹性接口service层和dao层设计实战2"><a href="#商智离线-ck服务弹性接口service层和dao层设计实战2" class="headerlink" title="商智离线_ck服务弹性接口service层和dao层设计实战2"></a>商智离线_ck服务弹性接口service层和dao层设计实战2</h2><h3 id="1-背景"><a href="#1-背景" class="headerlink" title="1.背景"></a>1.背景</h3><p><strong>在ck等olap数据服务层，为了抽象化我们创建的接口，扩展接口的可服用性，我们一般会把接口设计成弹性接口。弹性接口的意思就是，传入的维度参数列表是可选的、可变的，传出的指标数据列表也是可选的、可变的。</strong></p>
<p><strong>如下表所描述的一个接口为例来对弹性接口进行理解：</strong></p>
<table>
<thead>
<tr>
<th>serviceName</th>
<th>getBrandIndBrandRank</th>
</tr>
</thead>
<tbody><tr>
<td>demensions</td>
<td>STime_ETime_SecondIndId_[ThirdIndId]_[ShopType]_[TerminalId]_[BrandId]_[PriceRangeId]</td>
</tr>
<tr>
<td>indicators</td>
<td>BrandId_BrandName_RankRound_DealAmt_DealProNum_PV_UV_DealCustPriceAvg_DealRate_CartUser</td>
</tr>
<tr>
<td>options</td>
<td>PageNum_RowNum_OrderBy</td>
</tr>
<tr>
<td>attributes</td>
<td></td>
</tr>
</tbody></table>
<p><strong>首先，维度组合是该接口的入参列表，按照属性我们一般将维度划分为demensions、options。对于弹性接口，就设置了一些可传可不穿的参数，上表中中括号中的demensions维度即为弹性维度，全部options都是弹性维度。通过控制传入的维度参数，就可以通过一个接口实现多维度数据的查询。</strong></p>
<p><strong>指标组合就是该接口返回的出参列表，按照属性我们一般将指标划分为indicators、attributes。弹性接口的指标就全部都是可选的，只需要在入参中执行本次请求需要哪些指标即可。</strong></p>
<p><strong>排序字段和分页字段就是比较典型的options维度。</strong></p>
<h3 id="2-接口文档设计"><a href="#2-接口文档设计" class="headerlink" title="2.接口文档设计"></a>2.接口文档设计</h3><p><img src="//littleforestjia.github.io/2022/10/20/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%982/1.png" alt></p>
<h3 id="3-创建dao层param类"><a href="#3-创建dao层param类" class="headerlink" title="3.创建dao层param类"></a>3.创建dao层param类</h3><p><strong>dao层的param类实际上就是承接接口入参列表的bean类，一般直接借助fastjson组件将jsonObject对象转化为param类对象。</strong></p>
<p><strong>一个需求的所有弹性接口共用一个param类，那么需要将这些接口所涉及到的维度组合全部放进来即可。</strong></p>
<p>创建param类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndustryRankParam</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 请求唯一标识</span></span><br><span class="line">    <span class="keyword">private</span> String uuid;</span><br><span class="line">    <span class="comment">// 开始时间</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"STime"</span>)</span><br><span class="line">    <span class="keyword">private</span> String sTime;</span><br><span class="line">    <span class="comment">// 结束时间</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"ETime"</span>)</span><br><span class="line">    <span class="keyword">private</span> String eTime;</span><br><span class="line">    <span class="comment">// 二级类目</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"SecondIndId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; secondIndId;</span><br><span class="line">    <span class="comment">// 三级类目</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"ThirdIndId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; thirdIndId;</span><br><span class="line">    <span class="comment">// 店铺类型</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"ShopType"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; shopType;</span><br><span class="line">    <span class="comment">// 终端</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"TerminalId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; terminalId;</span><br><span class="line">    <span class="comment">// 主品牌</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"BrandId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; brandId;</span><br><span class="line">    <span class="comment">// 主品牌名称</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"BrandName"</span>)</span><br><span class="line">    <span class="keyword">private</span> String brandName;</span><br><span class="line">    <span class="comment">// 子品牌</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"SonBrandId"</span>)</span><br><span class="line">    <span class="keyword">private</span> String sonBrandId;</span><br><span class="line">    <span class="comment">// 子品牌名称</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"SonBrandName"</span>)</span><br><span class="line">    <span class="keyword">private</span> String sonBrandName;</span><br><span class="line">    <span class="comment">// 店铺</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"ShopId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; shopId;</span><br><span class="line">    <span class="comment">// 店铺名称</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"ShopName"</span>)</span><br><span class="line">    <span class="keyword">private</span> String shopName;</span><br><span class="line">    <span class="comment">// 环比开始时间</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"CRSTime"</span>)</span><br><span class="line">    <span class="keyword">private</span> String cRSTime;</span><br><span class="line">    <span class="comment">// 环比结束时间</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"CRETime"</span>)</span><br><span class="line">    <span class="keyword">private</span> String cRETime;</span><br><span class="line">    <span class="comment">// sku</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"SkuId"</span>)</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; skuId;</span><br><span class="line">    <span class="comment">// 排序</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"OrderBy"</span>)</span><br><span class="line">    <span class="keyword">private</span> String orderBy;</span><br><span class="line">    <span class="comment">// 页数</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"PageNum"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageNum = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 显示条数</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"RowNum"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> rowNum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 价格段ID</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name = <span class="string">"PriceRangeId"</span>)</span><br><span class="line">    <span class="keyword">private</span> String priceRangeId;</span><br><span class="line">    <span class="comment">// 二级类目价格段id  (暂未启用，预留)</span></span><br><span class="line">    <span class="meta">@JSONField</span>(name=<span class="string">"SecondPriceRangeId"</span>)</span><br><span class="line">    <span class="keyword">private</span> String secondPriceRangeId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; detQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; cRQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sonDetQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sonCRDetQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; shopQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; priceMoleculeCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; priceDenominatorCols;</span><br><span class="line">    <span class="keyword">private</span> String queryAllCols;</span><br><span class="line"><span class="comment">//    已经进行排序之后，拼接一个查询所有列的参数</span></span><br><span class="line">    <span class="keyword">private</span> String queryAllColsAndRanked;</span><br><span class="line">    <span class="keyword">private</span> String queryAllColsWithoutDt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; aggQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; catgSearchQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sumQueryCols;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; dealDetailCols;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAggQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(aggQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAggQueryCols</span><span class="params">(Set&lt;String&gt; aggQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.aggQueryCols = aggQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCatgSearchQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(catgSearchQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCatgSearchQueryCols</span><span class="params">(Set&lt;String&gt; catgSearchQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.catgSearchQueryCols = catgSearchQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSumQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(sumQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSumQueryCols</span><span class="params">(Set&lt;String&gt; sumQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sumQueryCols = sumQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDealDetailCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(dealDetailCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDealDetailCols</span><span class="params">(Set&lt;String&gt; dealDetailCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dealDetailCols = dealDetailCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getShopTypeSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shopType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUuid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uuid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUuid</span><span class="params">(String uuid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uuid = uuid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getsTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setsTime</span><span class="params">(String sTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sTime = sTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">geteTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> eTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seteTime</span><span class="params">(String eTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.eTime = eTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getThirdIndId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(thirdIndId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setThirdIndId</span><span class="params">(Set&lt;String&gt; thirdIndId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.thirdIndId = thirdIndId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSecondIndId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(secondIndId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecondIndId</span><span class="params">(Set&lt;String&gt; secondIndId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.secondIndId = secondIndId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShopType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(shopType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShopType</span><span class="params">(Set&lt;String&gt; shopType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopType = shopType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTerminalId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//6代表无线整体，初始化所以无线渠道</span></span><br><span class="line">        <span class="keyword">if</span> (terminalId != <span class="keyword">null</span> &amp;&amp; terminalId.size() &gt; <span class="number">0</span> &amp;&amp; terminalId.contains(<span class="string">"6"</span>))&#123;</span><br><span class="line">            terminalId.remove(<span class="string">"6"</span>);</span><br><span class="line">            terminalId.add(<span class="string">"1"</span>); <span class="comment">//App</span></span><br><span class="line">            terminalId.add(<span class="string">"3"</span>); <span class="comment">//WX</span></span><br><span class="line">            terminalId.add(<span class="string">"4"</span>); <span class="comment">//QQ</span></span><br><span class="line">            terminalId.add(<span class="string">"5"</span>); <span class="comment">//M</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(terminalId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTerminalId</span><span class="params">(Set&lt;String&gt; terminalId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.terminalId = terminalId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBrandId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(brandId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBrandId</span><span class="params">(Set&lt;String&gt; brandId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.brandId = brandId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBrandName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> brandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBrandName</span><span class="params">(String brandName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.brandName = brandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSonBrandId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sonBrandId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSonBrandId</span><span class="params">(String sonBrandId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sonBrandId = sonBrandId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSonBrandName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sonBrandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSonBrandName</span><span class="params">(String sonBrandName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sonBrandName = sonBrandName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShopId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(shopId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShopId</span><span class="params">(Set&lt;String&gt; shopId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopId = shopId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShopName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShopName</span><span class="params">(String shopName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopName = shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getcRSTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cRSTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setcRSTime</span><span class="params">(String cRSTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cRSTime = cRSTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getcRETime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cRETime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setcRETime</span><span class="params">(String cRETime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cRETime = cRETime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDetQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(detQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetQueryCols</span><span class="params">(Set&lt;String&gt; detQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.detQueryCols = detQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getQueryAllCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryAllCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryAllCols</span><span class="params">(String queryAllCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queryAllCols = queryAllCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getcRQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(cRQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setcRQueryCols</span><span class="params">(Set&lt;String&gt; cRQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cRQueryCols = cRQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSonDetQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(sonDetQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSonDetQueryCols</span><span class="params">(Set&lt;String&gt; sonDetQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sonDetQueryCols = sonDetQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSonCRDetQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(sonCRDetQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSonCRDetQueryCols</span><span class="params">(Set&lt;String&gt; sonCRDetQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sonCRDetQueryCols = sonCRDetQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShopQueryCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(shopQueryCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShopQueryCols</span><span class="params">(Set&lt;String&gt; shopQueryCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shopQueryCols = shopQueryCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPriceMoleculeCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(priceMoleculeCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPriceMoleculeCols</span><span class="params">(Set&lt;String&gt; priceMoleculeCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.priceMoleculeCols = priceMoleculeCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPriceDenominatorCols</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getStrBySet(priceDenominatorCols);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPriceDenominatorCols</span><span class="params">(Set&lt;String&gt; priceDenominatorCols)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.priceDenominatorCols = priceDenominatorCols;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSkuId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getQuotationStrBySet(skuId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSkuId</span><span class="params">(Set&lt;String&gt; skuId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.skuId = skuId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getOrderBy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> orderBy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrderBy</span><span class="params">(String orderBy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.orderBy = orderBy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageNum</span><span class="params">(<span class="keyword">int</span> pageNum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageNum = pageNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRowNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rowNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRowNum</span><span class="params">(<span class="keyword">int</span> rowNum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rowNum = rowNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPriceRangeId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> priceRangeId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPriceRangeId</span><span class="params">(String priceRangeId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.priceRangeId = priceRangeId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSecondPriceRangeId</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> secondPriceRangeId; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecondPriceRangeId</span><span class="params">(String secondPriceRangeId)</span> </span>&#123; <span class="keyword">this</span>.secondPriceRangeId = secondPriceRangeId ; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    已经进行排序之后，拼接一个查询所有列的参数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getQueryAllColsAndRanked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryAllColsAndRanked;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryAllColsAndRanked</span><span class="params">(String queryAllColsAndRanked)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queryAllColsAndRanked = queryAllColsAndRanked;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getQueryAllColsWithoutDt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> queryAllColsWithoutDt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryAllColsWithoutDt</span><span class="params">(String queryAllColsWithoutDt)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.queryAllColsWithoutDt = queryAllColsWithoutDt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意添加@JSONField注解设置json字段与param属性的对应关系。</strong></p>
<h3 id="4-创建dao层的mapper接口类"><a href="#4-创建dao层的mapper接口类" class="headerlink" title="4.创建dao层的mapper接口类"></a>4.创建dao层的mapper接口类</h3><p>dao层的mapper接口类是mybatis基于spring框架生成dao方法实例的基础，供service层依赖引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jd.ad.dao.mapper.sztrade;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jd.ad.dao.bean.sztrade.SZTradeFeatureParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SZTradeFeatureMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//交易-交易特征-渠道特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradeChannelFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-类目特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradeCategoryFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-品牌特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradeBrandFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-商品价格带特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradePriceDistrictFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-新老客户特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradeOldNewCustomerFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-支付方式特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradePayTypeFeature(SZTradeFeatureParam param);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//交易-交易特征-客单件数特征</span></span><br><span class="line">    List&lt;LinkedHashMap&lt;String, Object&gt;&gt; getTradeSaleQuantityFeature(SZTradeFeatureParam param);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-创建继承整个微服务抽象类的service方法"><a href="#5-创建继承整个微服务抽象类的service方法" class="headerlink" title="5.创建继承整个微服务抽象类的service方法"></a>5.创建继承整个微服务抽象类的service方法</h3><p><strong>我们在service类中，为了优雅和美观，将所有接口抽象到同一个query方法中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndustryRankService</span> <span class="keyword">extends</span> <span class="title">BrandService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    IndustryRankMapper industryRankMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JSONObject <span class="title">query</span><span class="params">(JSONObject jsonObject, String methodName)</span> </span>&#123;</span><br><span class="line">        List&lt;LinkedHashMap&lt;String, Object&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        JSONObject obj;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 校验时间参数，已修改到serviceList.ini中校验</span></span><br><span class="line">            <span class="comment">// CheckUtils.checkDimensionsTime(jsonObject);</span></span><br><span class="line">            IndustryRankParam param = (IndustryRankParam) ReqUtils.generateParam(jsonObject, IndustryRankParam<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">            Set&lt;String&gt; cols = ReqUtils.generateCols(jsonObject);</span><br><span class="line">            <span class="keyword">if</span> (cols == <span class="keyword">null</span> || cols.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                BrandLog.logError(<span class="string">"no query any message:"</span> + jsonObject.toJSONString());</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ValidateException(ErrorEnum.DATA_QUERY_ERROR.code, <span class="string">"no query any message"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 设置查询列信息</span></span><br><span class="line">            IndustryRankUtil.setQueryCols(cols, param);</span><br><span class="line">            Method m = industryRankMapper.getClass().getMethod(methodName, IndustryRankParam<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            List&lt;LinkedHashMap&lt;String, Object&gt;&gt; ckData = (List&lt;LinkedHashMap&lt;String, Object&gt;&gt;) m.invoke(industryRankMapper, param);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ckData != <span class="keyword">null</span> &amp;&amp; ckData.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">               result.addAll(ckData);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            obj = <span class="keyword">new</span> TransformForClickHouse().transform(result);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            BrandLog.logError(e.getMessage(), e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ValidateException(ErrorEnum.DATA_QUERY_ERROR.code, e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-汇总</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandSum</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandSum"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandRankDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandRankDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-汇总下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandSumDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandSumDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-价格区间</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandPrice</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandPrice"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-价格区间（全部品牌）</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandPriceSum</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandPriceSum"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-店铺榜单</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndShopRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndShopRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    行业-店铺榜单-详情</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndShopRankDet</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndShopRankDet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-店铺榜单-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndShopRankDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndShopRankDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndProRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndProRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndProRankDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndProRankDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-店铺榜单-二级类目</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndShopRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndShopRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    行业-店铺榜单-详情-二级类目</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndShopRankDet</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndShopRankDet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-店铺榜单-二级类目-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndShopRankDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndShopRankDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-二级类目</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndProRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndProRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-二级类目-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndProRankDown</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndProRankDown"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-二级类目-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndShopRankTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndShopRankTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-二级类目-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandScndIndShopRankTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandScndIndShopRankTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-商品榜单-二级类目-下载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndProRankTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndProRankTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-品牌详情-趋势图</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandRankTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandRankTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-品牌详情-商品榜单</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandRankProRank</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandRankProRank"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业-品牌榜单-品牌详情-趋势图-汇总</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndBrandSumTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndBrandSumTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业分析-行业概况-大盘概况</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndCateSummary</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndCateSummary"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行业分析-行业概况-大盘走势-趋势图</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">getBrandIndCateTrend</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> query(jsonObject, <span class="string">"getBrandIndCateTrend"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-创建ReqUtils类与工具方法"><a href="#6-创建ReqUtils类与工具方法" class="headerlink" title="6.创建ReqUtils类与工具方法"></a>6.创建ReqUtils类与工具方法</h3><p>1.generateParam()方法将jsonObject转化为parambean类对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">generateParam</span><span class="params">(JSONObject jsonObject, Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    JSONObject bodyMsg = jsonObject.getJSONObject(<span class="string">"body"</span>);</span><br><span class="line">    JSONObject dimsMsg = bodyMsg.getJSONObject(<span class="string">"dimensions"</span>);</span><br><span class="line">    JSONObject optionsMsg = bodyMsg.getJSONObject(<span class="string">"options"</span>);</span><br><span class="line">    String uuid = jsonObject.getJSONObject(<span class="string">"header"</span>).getString(<span class="string">"uuid"</span>);</span><br><span class="line">    String pin = jsonObject.getJSONObject(<span class="string">"header"</span>).getString(<span class="string">"BRAND_PIN"</span>);</span><br><span class="line">    JSONObject uuidMsg = <span class="keyword">new</span> JSONObject();</span><br><span class="line">    uuidMsg.put(<span class="string">"uuid"</span>, uuid);</span><br><span class="line"></span><br><span class="line">    JSONObject conditionMsg = <span class="keyword">new</span> JSONObject();</span><br><span class="line">    conditionMsg.putAll(dimsMsg);</span><br><span class="line">    <span class="keyword">if</span> (optionsMsg != <span class="keyword">null</span>) &#123;</span><br><span class="line">        conditionMsg.putAll(optionsMsg);</span><br><span class="line">    &#125;</span><br><span class="line">    conditionMsg.putAll(uuidMsg);</span><br><span class="line">    conditionMsg.put(<span class="string">"BRAND_PIN"</span>, pin);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JSONObject.toJavaObject(conditionMsg, clazz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>很明显，该方法中最主要的步骤，就是把传入的维度组合dimensions、options放入param类对象中。</strong></p>
<p>2.generateCols()生成查询信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Set <span class="title">generateCols</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    JSONObject bodyMsg = jsonObject.getJSONObject(<span class="string">"body"</span>);</span><br><span class="line">    JSONArray indicatorsMsg = bodyMsg.getJSONArray(<span class="string">"indicators"</span>);</span><br><span class="line">    JSONArray attributesMsg = bodyMsg.getJSONArray(<span class="string">"attributes"</span>);</span><br><span class="line"></span><br><span class="line">    JSONArray conditionMsg = <span class="keyword">new</span> JSONArray();</span><br><span class="line">    conditionMsg.addAll(indicatorsMsg);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != attributesMsg)</span><br><span class="line">        conditionMsg.addAll(attributesMsg);</span><br><span class="line"></span><br><span class="line">    Object[] colsArray = conditionMsg.toArray();</span><br><span class="line">    Set&lt;String&gt; cols = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Object col : colsArray) &#123;</span><br><span class="line">        cols.add(String.valueOf(col));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cols;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>很明显，该方法最主要的步骤，就是从传入的参数中获取本次请求所需要的指标组合indicators、attributes。</strong></p>
<h3 id="7-写出一个接口查询全量指标的sql"><a href="#7-写出一个接口查询全量指标的sql" class="headerlink" title="7.写出一个接口查询全量指标的sql"></a>7.写出一个接口查询全量指标的sql</h3><p>做这一步的目的是为了观察sql，sql中抽象出共性较大的弹性查询字段：</p>
<h4 id="getBrandIndCateSummary"><a href="#getBrandIndCateSummary" class="headerlink" title="getBrandIndCateSummary"></a>getBrandIndCateSummary</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	UV,</span><br><span class="line">	VisitedShopNum,</span><br><span class="line">	CateClickNum,</span><br><span class="line">	DealSkuNum,</span><br><span class="line">	PV,</span><br><span class="line">	DealUser / UV <span class="keyword">as</span> DealRate,</span><br><span class="line">	BrandNum,</span><br><span class="line">	CateSearchNum,</span><br><span class="line">	VisitedSkuNum,</span><br><span class="line">	CartUser,</span><br><span class="line">	DealAmt,</span><br><span class="line">	DealProNum,</span><br><span class="line">	DealShopNum,</span><br><span class="line">	DealBrandNum,</span><br><span class="line">	VisitedBrandNum,</span><br><span class="line">	CateClickNum / CateSearchNum <span class="keyword">as</span> SearchClickRate,</span><br><span class="line">	ShopNum,</span><br><span class="line">	ProFollowUser,</span><br><span class="line">	DealAmt / DealUser <span class="keyword">as</span> DealCustPriceAvg</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	(</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		<span class="number">1</span> <span class="keyword">as</span> joinKey ,</span><br><span class="line">		sumMerge(pv) <span class="keyword">as</span> PV,</span><br><span class="line">		uniqMerge(dealSku) <span class="keyword">as</span> DealSkuNum,</span><br><span class="line">		uniqMerge(followAcct) <span class="keyword">as</span> ProFollowUser,</span><br><span class="line">		uniqMerge(dealAcct) <span class="keyword">as</span> DealUser,</span><br><span class="line">		sumMerge(dealProNum) <span class="keyword">as</span> DealProNum,</span><br><span class="line">		sumMerge(searchClickNum) <span class="keyword">as</span> CateClickNum,</span><br><span class="line">		uniqMerge(browseAcct) <span class="keyword">as</span> UV,</span><br><span class="line">		sumMerge(dealAmt) <span class="keyword">as</span> DealAmt,</span><br><span class="line">		uniqMerge(browseSku) <span class="keyword">as</span> VisitedSkuNum,</span><br><span class="line">		uniqMerge(cartAcct) <span class="keyword">as</span> CartUser</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_zh_industry_product_union_all_agg_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">		<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">		<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>) ) a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">		<span class="keyword">sum</span>(catgSearchNum) <span class="keyword">as</span> CateSearchNum</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_industry_catg_search_click_num_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>) ) d <span class="keyword">on</span></span><br><span class="line">	a.joinKey = d.joinKey</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">    	uniq(sonBrandId) <span class="keyword">as</span> BrandNum,</span><br><span class="line">    	uniq(shopId) <span class="keyword">as</span> ShopNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)) e <span class="keyword">on</span></span><br><span class="line">	a.joinKey = e.joinKey</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">    	uniq(isDealShop) <span class="keyword">as</span> DealShopNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">  		<span class="comment">--and dealShopTerminal in ('1')</span></span><br><span class="line">  ) f <span class="keyword">on</span></span><br><span class="line">	a.joinKey = f.joinKey</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">    	uniq(isDealBrand) <span class="keyword">as</span> DealBrandNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">    	<span class="comment">--and dealBrandTerminal in ('1')</span></span><br><span class="line">  ) g <span class="keyword">on</span></span><br><span class="line">	a.joinKey = g.joinKey</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">    	uniq(isVisitedShop) <span class="keyword">as</span> VisitedShopNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">    	<span class="comment">--and visitedShopTerminal in ('1')</span></span><br><span class="line">  ) h <span class="keyword">on</span></span><br><span class="line">	a.joinKey = h.joinKey</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	<span class="number">1</span> <span class="keyword">as</span> joinKey,</span><br><span class="line">    	uniq(isVisitedBrand) <span class="keyword">as</span> VisitedBrandNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">  		<span class="comment">--and visitedBrandTerminal in ('1')</span></span><br><span class="line">  ) i <span class="keyword">on</span></span><br><span class="line">	a.joinKey = i.joinKey;</span><br></pre></td></tr></table></figure>

<h4 id="getBrandIndCateTrend"><a href="#getBrandIndCateTrend" class="headerlink" title="getBrandIndCateTrend"></a>getBrandIndCateTrend</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	UV,</span><br><span class="line">	VisitedShopNum,</span><br><span class="line">	CateClickNum,</span><br><span class="line">	DealSkuNum,</span><br><span class="line">	PV,</span><br><span class="line">	DealUser / UV <span class="keyword">as</span> DealRate,</span><br><span class="line">	BrandNum,</span><br><span class="line">	CateSearchNum,</span><br><span class="line">	DealNum,</span><br><span class="line">	VisitedSkuNum,</span><br><span class="line">	DealUser,</span><br><span class="line">	CartUser,</span><br><span class="line">	DealAmt,</span><br><span class="line">	DealProNum,</span><br><span class="line">	DealShopNum,</span><br><span class="line">	DealBrandNum,</span><br><span class="line">	VisitedBrandNum,</span><br><span class="line">	CateClickNum / CateSearchNum <span class="keyword">as</span> SearchClickRate,</span><br><span class="line">	ShopNum,</span><br><span class="line">	ProFollowUser,</span><br><span class="line">	DealAmt / DealUser <span class="keyword">as</span> DealCustPriceAvg,</span><br><span class="line">	a.DateTime <span class="keyword">as</span> DateTime</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	(</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		sumMerge(pv) <span class="keyword">as</span> PV,</span><br><span class="line">		uniqMerge(dealSku) <span class="keyword">as</span> DealSkuNum,</span><br><span class="line">		uniqMerge(followAcct) <span class="keyword">as</span> ProFollowUser,</span><br><span class="line">		uniqMerge(dealAcct) <span class="keyword">as</span> DealUser,</span><br><span class="line">		sumMerge(dealProNum) <span class="keyword">as</span> DealProNum,</span><br><span class="line">		sumMerge(searchClickNum) <span class="keyword">as</span> CateClickNum,</span><br><span class="line">		uniqMerge(browseAcct) <span class="keyword">as</span> UV,</span><br><span class="line">		dateTime <span class="keyword">as</span> DateTime,</span><br><span class="line">		sumMerge(dealAmt) <span class="keyword">as</span> DealAmt,</span><br><span class="line">		uniqMerge(browseSku) <span class="keyword">as</span> VisitedSkuNum,</span><br><span class="line">		uniqMerge(cartAcct) <span class="keyword">as</span> CartUser</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_zh_industry_product_union_all_agg_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">		<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">		<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">		dateTime ) a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		<span class="keyword">sum</span>(catgSearchNum) <span class="keyword">as</span> CateSearchNum,</span><br><span class="line">		dateTime <span class="keyword">as</span> DateTime1</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_industry_catg_search_click_num_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">		<span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">			dateTime ) d <span class="keyword">on</span></span><br><span class="line">	a.DateTime = d.DateTime1</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		uniq(shopId) <span class="keyword">as</span> ShopNum,</span><br><span class="line">		dateTime <span class="keyword">as</span> DateTime1,</span><br><span class="line">		uniq(sonBrandId) <span class="keyword">as</span> BrandNum</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_industry_catg_brand_shop_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">				<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">			<span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">				dateTime ) e <span class="keyword">on</span></span><br><span class="line">	a.DateTime = e.DateTime1</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		uniq(saleOrdId) <span class="keyword">as</span> DealNum,</span><br><span class="line">		dateTime <span class="keyword">as</span> DateTime1</span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		bc_online. ck_product_deal_detail_d</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">		<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">		<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">				<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">			<span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">				dateTime ) f <span class="keyword">on</span></span><br><span class="line">	a.DateTime = f.DateTime1</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	dateTime <span class="keyword">as</span> DateTime1,</span><br><span class="line">    	uniq(isDealShop) <span class="keyword">as</span> DealShopNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">  		<span class="comment">--and dealShopTerminal in ('1')</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> dateTime</span><br><span class="line">  ) g <span class="keyword">on</span></span><br><span class="line">	a.DateTime = g.DateTime1</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	dateTime <span class="keyword">as</span> DateTime1,</span><br><span class="line">    	uniq(isDealBrand) <span class="keyword">as</span> DealBrandNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">    	<span class="comment">--and dealBrandTerminal in ('1')</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> dateTime</span><br><span class="line">  ) h <span class="keyword">on</span></span><br><span class="line">	a.DateTime = h.DateTime1</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	dateTime <span class="keyword">as</span> DateTime1,</span><br><span class="line">    	uniq(isVisitedShop) <span class="keyword">as</span> VisitedShopNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">    	<span class="comment">--and visitedShopTerminal in ('1')</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> dateTime</span><br><span class="line">  ) i <span class="keyword">on</span></span><br><span class="line">	a.DateTime = i.DateTime1</span><br><span class="line">	<span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">    	dateTime <span class="keyword">as</span> DateTime1,</span><br><span class="line">    	uniq(isVisitedBrand) <span class="keyword">as</span> VisitedBrandNum</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">    	bc_online.ck_industry_catg_brand_shop_d</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">    	dateTime &gt;= <span class="string">'2022-11-09'</span></span><br><span class="line">			<span class="keyword">and</span> dateTime &lt;= <span class="string">'2022-11-15'</span></span><br><span class="line">			<span class="keyword">and</span> thirdIndId <span class="keyword">in</span> (<span class="string">'1602'</span>)</span><br><span class="line">			<span class="keyword">and</span> secondIndId <span class="keyword">in</span> (<span class="string">'1585'</span>)</span><br><span class="line">			<span class="keyword">and</span> shopType <span class="keyword">in</span> (<span class="string">'POP'</span>, <span class="string">'B2C'</span>)</span><br><span class="line">  		<span class="comment">--and visitedBrandTerminal in ('1')</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> dateTime</span><br><span class="line">  ) j <span class="keyword">on</span></span><br><span class="line">	a.DateTime = j.DateTime1;</span><br></pre></td></tr></table></figure>

<p><strong>从所有sql中可以抽象出比较常用的指标字段组合，比如商品宽表聚合表指标、类目搜索数据表指标、品牌店铺数表指标、商品成交明细表指标、所有指标等。</strong></p>
<h3 id="8-创建IndustryRankUtil类与工具方法"><a href="#8-创建IndustryRankUtil类与工具方法" class="headerlink" title="8.创建IndustryRankUtil类与工具方法"></a>8.创建IndustryRankUtil类与工具方法</h3><p><strong>在上述总结的可以弹性变化的指标字段组合的基础之上，创建对应的查询指标组合Set&lt;String&gt;字段或String字段，根据入参中传入的indicators和attributes指标组合来构建这四个字段，并放入到param类对象中，方便后续以占位符的形式放入sql中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndustryRankUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setQueryCols</span><span class="params">(Set&lt;String&gt; cols, IndustryRankParam param)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//商品宽表指标</span></span><br><span class="line">        Set&lt;String&gt; detQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//环比指标</span></span><br><span class="line">        Set&lt;String&gt; cRQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//商品宽表子查询</span></span><br><span class="line">        Set&lt;String&gt; sonDetQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//商品宽表对比子查询</span></span><br><span class="line">        Set&lt;String&gt; sonCRDetQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//店铺关注</span></span><br><span class="line">        Set&lt;String&gt; shopQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//价格段占比分子</span></span><br><span class="line">        Set&lt;String&gt; priceMoleculeCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//价格段占比分母</span></span><br><span class="line">        Set&lt;String&gt; priceDenominatorCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        String queryAllCols = <span class="keyword">null</span>;</span><br><span class="line">        String queryAllColsAndRanked = <span class="keyword">null</span>;</span><br><span class="line">        String queryAllColsWithoutDt = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//商品宽表聚合表指标</span></span><br><span class="line">        Set&lt;String&gt; aggQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//类目搜索数据表指标</span></span><br><span class="line">        Set&lt;String&gt; catgSearchQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//品牌店铺数表指标</span></span><br><span class="line">        Set&lt;String&gt; sumQueryCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">        <span class="comment">//商品成交明细表指标</span></span><br><span class="line">        Set&lt;String&gt; dealDetailCols = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//成交金额</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealAmt"</span>)) &#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(dealAmt) as DealAmt"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAmt"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(dealAmt) as DealAmt"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交件数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealProNum"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(dealProNum) as DealProNum"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealProNum"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(dealProNum) as DealProNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//浏览量</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"PV"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(pv) as PV"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"pv"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(pv) as PV"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//访客数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"UV"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(browseAcct) as UV"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"browseAcct"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(browseAcct) as UV"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//加购人数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CartUser"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(cartAcct) as CartUser"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"cartAcct"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(cartAcct) as CartUser"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//商品关注人数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"ProFollowUser"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(followAcct) as ProFollowUser"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"followAcct"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(followAcct) as ProFollowUser"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//搜索点击次数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"SearchClickNum"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(searchClickNum) as SearchClickNum"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"searchClickNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//被访问商品数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"VisitedSkuNum"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(browseSku) as VisitedSkuNum"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"browseSku"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(browseSku) as VisitedSkuNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//动销商品数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealSkuNum"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(dealSku) as DealSkuNum"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealSku"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(dealSku) as DealSkuNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交客单价</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealCustPriceAvg"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(dealAmt) as DealAmt"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAcct"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAmt"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(dealAmt) as DealAmt"</span>);</span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交转化率</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealRate"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(browseAcct) as UV"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAcct"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"browseAcct"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(browseAcct) as UV"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交人数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealUser"</span>))&#123;</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交单量</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DealNum"</span>))&#123;</span><br><span class="line"></span><br><span class="line">            dealDetailCols.add(<span class="string">"uniq(saleOrdId) as DealNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交金额环比</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CRDealAmt"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(dealAmt) as DealAmt"</span>);</span><br><span class="line">            cRQueryCols.add(<span class="string">"sumMerge(dealAmt) as CDealAmt"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAmt"</span>);</span><br><span class="line">            sonCRDetQueryCols.add(<span class="string">"dealAmt"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交件数环比</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CRDealProNum"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"sumMerge(dealProNum) as DealProNum"</span>);</span><br><span class="line">            cRQueryCols.add(<span class="string">"sumMerge(dealProNum) as CDealProNum"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealProNum"</span>);</span><br><span class="line">            sonCRDetQueryCols.add(<span class="string">"dealProNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//成交人数对比</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CRDealUser"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"uniqMerge(dealAcct) as DealUser"</span>);</span><br><span class="line">            cRQueryCols.add(<span class="string">"uniqMerge(dealAcct) as CDealUser"</span>);</span><br><span class="line">            sonDetQueryCols.add(<span class="string">"dealAcct"</span>);</span><br><span class="line">            sonCRDetQueryCols.add(<span class="string">"dealAcct"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//店铺关注</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"ShopFollowUser"</span>))&#123;</span><br><span class="line">            shopQueryCols.add(<span class="string">"uniqMerge(shopFollowAcct) as ShopFollowUser"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//趋势图dt</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"DateTime"</span>))&#123;</span><br><span class="line">            detQueryCols.add(<span class="string">"dateTime as DateTime"</span>);</span><br><span class="line">            shopQueryCols.add(<span class="string">"dateTime as DateTime"</span>);</span><br><span class="line"></span><br><span class="line">            aggQueryCols.add(<span class="string">"dateTime as DateTime"</span>);</span><br><span class="line">            catgSearchQueryCols.add(<span class="string">"dateTime as DateTime1"</span>);</span><br><span class="line">            sumQueryCols.add(<span class="string">"dateTime as DateTime1"</span>);</span><br><span class="line">            dealDetailCols.add(<span class="string">"dateTime as DateTime1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//价格段占比</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"PriceRangePer"</span>))&#123;</span><br><span class="line">            priceMoleculeCols.add(<span class="string">"sum(DealAmt) as DealAmt"</span>);</span><br><span class="line">            priceDenominatorCols.add(<span class="string">"sum(DealAmt) as SumDealAmt"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//类目搜索次数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CateSearchNum"</span>))&#123;</span><br><span class="line">            catgSearchQueryCols.add(<span class="string">"sum(catgSearchNum) as CateSearchNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//类目点击次数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"CateClickNum"</span>))&#123;</span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(searchClickNum) as CateClickNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//搜索点击率</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"SearchClickRate"</span>))&#123;</span><br><span class="line">            aggQueryCols.add(<span class="string">"sumMerge(searchClickNum) as CateClickNum"</span>);</span><br><span class="line">            catgSearchQueryCols.add(<span class="string">"sum(catgSearchNum) as CateSearchNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//总品牌数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"BrandNum"</span>))&#123;</span><br><span class="line">            sumQueryCols.add(<span class="string">"uniq(sonBrandId) as BrandNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//总店铺数</span></span><br><span class="line">        <span class="keyword">if</span> (cols.contains(<span class="string">"ShopNum"</span>))&#123;</span><br><span class="line">            sumQueryCols.add(<span class="string">"uniq(shopId) as ShopNum"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        StringBuffer queryAllColsSb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        StringBuffer queryAllColsWithoutDtSb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (String col : cols) &#123;</span><br><span class="line">            String column = col;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"DealCustPriceAvg"</span>.equals(column)) &#123;</span><br><span class="line">                column = <span class="string">"DealAmt/DealUser as DealCustPriceAvg"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"DealRate"</span>.equals(column)) &#123;</span><br><span class="line">                column = <span class="string">"DealUser/UV as DealRate"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"CRDealAmt"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"(DealAmt-CDealAmt)/abs(CDealAmt) as CRDealAmt"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"CRDealProNum"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"(DealProNum-CDealProNum)/abs(CDealProNum) as CRDealProNum"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"CRDealUser"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"(DealUser-CDealUser)/abs(CDealUser) as CRDealUser"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"RankRound"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"rowNumberInAllBlocks()+1 AS RankRound"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"PriceRangePer"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"if(DealAmt/SumDealAmt &lt; 0,0.0,DealAmt/SumDealAmt) AS PriceRangePer"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"SearchClickRate"</span>.equals(column))&#123;</span><br><span class="line">                column = <span class="string">"CateClickNum/CateSearchNum as SearchClickRate"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            queryAllColsSb.append(column).append(<span class="string">","</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"DateTime"</span>.equals(column)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                queryAllColsWithoutDtSb.append(column).append(<span class="string">","</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        queryAllCols = queryAllColsSb.toString();</span><br><span class="line">        <span class="keyword">if</span> (queryAllCols.length() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            queryAllCols = queryAllCols.substring(<span class="number">0</span>, queryAllCols.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对于行业趋势接口，DateTime字段直接在xml中添加。</span></span><br><span class="line">        queryAllColsWithoutDt = queryAllColsWithoutDtSb.toString();</span><br><span class="line">        <span class="keyword">if</span> (queryAllColsWithoutDt.length() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            queryAllColsWithoutDt = queryAllColsWithoutDt.substring(<span class="number">0</span>, queryAllColsWithoutDt.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        已经进行排序之后，拼接一个查询所有列的参数</span></span><br><span class="line">        StringBuffer queryAllColsAndRankedSb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (String col : cols) &#123;</span><br><span class="line">            String column = col;</span><br><span class="line">            queryAllColsAndRankedSb.append(column).append(<span class="string">","</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        queryAllColsAndRanked = queryAllColsAndRankedSb.toString();</span><br><span class="line">        <span class="keyword">if</span>(queryAllColsAndRanked.length() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            queryAllColsAndRanked = queryAllColsAndRanked.substring(<span class="number">0</span>, queryAllColsAndRanked.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        param.setDetQueryCols(detQueryCols);</span><br><span class="line">        param.setcRQueryCols(cRQueryCols);</span><br><span class="line">        param.setSonDetQueryCols(sonDetQueryCols);</span><br><span class="line">        param.setSonCRDetQueryCols(sonCRDetQueryCols);</span><br><span class="line">        param.setShopQueryCols(shopQueryCols);</span><br><span class="line">        param.setPriceMoleculeCols(priceMoleculeCols);</span><br><span class="line">        param.setPriceDenominatorCols(priceDenominatorCols);</span><br><span class="line">        param.setQueryAllCols(queryAllCols);</span><br><span class="line">        param.setQueryAllColsAndRanked(queryAllColsAndRanked);</span><br><span class="line">        param.setQueryAllColsWithoutDt(queryAllColsWithoutDt);</span><br><span class="line"></span><br><span class="line">        param.setAggQueryCols(aggQueryCols);</span><br><span class="line">        param.setCatgSearchQueryCols(catgSearchQueryCols);</span><br><span class="line">        param.setSumQueryCols(sumQueryCols);</span><br><span class="line">        param.setDealDetailCols(dealDetailCols);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-创建dao层的mapper-xml配置文件"><a href="#11-创建dao层的mapper-xml配置文件" class="headerlink" title="11.创建dao层的mapper.xml配置文件"></a>11.创建dao层的mapper.xml配置文件</h3><p>创建这个文件最重要的就是优雅，实现优雅的根本秘诀就是抽象与复用，大体顺序就是resultMap-select-dbsql-tablesql-wheresql：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.jd.ad.dao.mapper.industry.IndustryRankMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"java.util.LinkedHashMap"</span> <span class="attr">id</span>=<span class="string">"returnHashMap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--省略了很多接口select，此处只以大盘概况和大盘走势两个接口为范例--&gt;</span> </span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!--行业分析-行业概况-大盘概况--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getBrandIndCateSummary"</span> <span class="attr">resultMap</span>=<span class="string">"returnHashMap"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">parameterType</span>=<span class="string">"com.jd.ad.dao.bean.industry.IndustryRankParam"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"queryAllCols!=null and queryAllCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">            select</span><br><span class="line">            $&#123;queryAllCols&#125;</span><br><span class="line">            from</span><br><span class="line">            (</span><br><span class="line">            select</span><br><span class="line">            1 as joinKey<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"aggQueryCols !=null and aggQueryCols.length()&gt;0"</span>&gt;</span>,$&#123;aggQueryCols&#125;</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"detTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"where"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            ) a</span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"catgSearchQueryCols!=null and catgSearchQueryCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">                left join</span><br><span class="line">                (</span><br><span class="line">                select</span><br><span class="line">                1 as joinKey,$&#123;catgSearchQueryCols&#125;</span><br><span class="line">                from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"searchTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"searchWhere"</span>/&gt;</span></span><br><span class="line">                ) d on a.joinKey = d.joinKey</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sumQueryCols!=null and sumQueryCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">                left join</span><br><span class="line">                (</span><br><span class="line">                select</span><br><span class="line">                1 as joinKey,$&#123;sumQueryCols&#125;</span><br><span class="line">                from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopWhere"</span>/&gt;</span></span><br><span class="line">                ) e on a.joinKey = e.joinKey</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            1 as joinKey, uniq(isDealShop) as DealShopNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and dealShopTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            ) f on a.joinKey = f.joinKey</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            1 as joinKey, uniq(isDealBrand) as DealBrandNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and dealBrandTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            ) g on a.joinKey = g.joinKey</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            1 as joinKey, uniq(isVisitedShop) as VisitedShopNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and visitedShopTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            ) h on a.joinKey = h.joinKey</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            1 as joinKey, uniq(isVisitedBrand) as VisitedBrandNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and visitedBrandTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            ) i on</span><br><span class="line">            a.joinKey = i.joinKey</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--行业分析-行业概况-大盘走势-趋势图--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getBrandIndCateTrend"</span> <span class="attr">resultMap</span>=<span class="string">"returnHashMap"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">parameterType</span>=<span class="string">"com.jd.ad.dao.bean.industry.IndustryRankParam"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"queryAllColsWithoutDt!=null and queryAllColsWithoutDt.length()&gt;0"</span>&gt;</span></span><br><span class="line">            select</span><br><span class="line">            $&#123;queryAllColsWithoutDt&#125;,a.DateTime as DateTime</span><br><span class="line">            from</span><br><span class="line">            (</span><br><span class="line">            select</span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"aggQueryCols !=null and aggQueryCols.length()&gt;0"</span>&gt;</span>$&#123;aggQueryCols&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"detTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"where"</span>/&gt;</span></span><br><span class="line">            group by dateTime</span><br><span class="line">            ) a</span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"catgSearchQueryCols!=null and catgSearchQueryCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">                left join</span><br><span class="line">                (</span><br><span class="line">                select</span><br><span class="line">                $&#123;catgSearchQueryCols&#125;</span><br><span class="line">                from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"searchTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"searchWhere"</span>/&gt;</span></span><br><span class="line">                group by dateTime</span><br><span class="line">                ) d</span><br><span class="line">                on a.DateTime = d.DateTime1</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sumQueryCols!=null and sumQueryCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">                left join</span><br><span class="line">                (</span><br><span class="line">                select</span><br><span class="line">                $&#123;sumQueryCols&#125;</span><br><span class="line">                from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopWhere"</span>/&gt;</span></span><br><span class="line">                group by dateTime</span><br><span class="line">                ) e</span><br><span class="line">                on a.DateTime = e.DateTime1</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dealDetailCols!=null and dealDetailCols.length()&gt;0"</span>&gt;</span></span><br><span class="line">                left join</span><br><span class="line">                (</span><br><span class="line">                select</span><br><span class="line">                $&#123;dealDetailCols&#125;</span><br><span class="line">                from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealWhere"</span>/&gt;</span></span><br><span class="line">                group by dateTime</span><br><span class="line">                ) f</span><br><span class="line">                on a.DateTime = f.DateTime1</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            dateTime as DateTime1, uniq(isDealShop) as DealShopNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and dealShopTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            group by dateTime</span><br><span class="line">            ) g on a.DateTime = g.DateTime1</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            dateTime as DateTime1, uniq(isDealBrand) as DealBrandNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and dealBrandTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            group by dateTime</span><br><span class="line">            ) h on a.DateTime = h.DateTime1</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            dateTime as DateTime1, uniq(isVisitedShop) as VisitedShopNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and visitedShopTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            group by dateTime</span><br><span class="line">            ) i on a.DateTime = i.DateTime1</span><br><span class="line">            left join (</span><br><span class="line">            select</span><br><span class="line">            dateTime as DateTime1, uniq(isVisitedBrand) as VisitedBrandNum</span><br><span class="line">            from <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"database"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"brandShopTable"</span>/&gt;</span><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"dealVisitedWhere"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">                and visitedBrandTerminal in ($&#123;terminalId&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            group by dateTime</span><br><span class="line">            ) j on a.DateTime = j.DateTime1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--行业商品宽表条件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"where"</span>&gt;</span></span><br><span class="line">        where dateTime <span class="symbol">&amp;gt;</span>= #&#123;sTime&#125; and dateTime <span class="symbol">&amp;lt;</span>= #&#123;eTime&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"thirdIndId != null and thirdIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and thirdIndId in ($&#123;thirdIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondIndId != null and secondIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondIndId in ($&#123;secondIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"shopId != null and shopId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and shopId in ($&#123;shopId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"skuId != null and skuId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and skuId in ($&#123;skuId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"priceRangeId != null and priceRangeId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and priceRangeId = #&#123;priceRangeId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondPriceRangeId != null and secondPriceRangeId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondPriceRangeId = #&#123;secondPriceRangeId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and terminalId in ($&#123;terminalId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"shopType != null and shopType.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and shopType in ($&#123;shopType&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--类目搜索次数条件，没有ShopType的限制--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"searchWhere"</span>&gt;</span></span><br><span class="line">        where dateTime <span class="symbol">&amp;gt;</span>= #&#123;sTime&#125; and dateTime <span class="symbol">&amp;lt;</span>= #&#123;eTime&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"thirdIndId != null and thirdIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and thirdIndId in ($&#123;thirdIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondIndId != null and secondIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondIndId in ($&#123;secondIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and terminalId in ($&#123;terminalId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--品牌店铺数条件，没有TerminalId限制时返回数据，有TerminalId限制时返回0--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"brandShopWhere"</span>&gt;</span></span><br><span class="line">        where dateTime <span class="symbol">&amp;gt;</span>= #&#123;sTime&#125; and dateTime <span class="symbol">&amp;lt;</span>= #&#123;eTime&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"thirdIndId != null and thirdIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and thirdIndId in ($&#123;thirdIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondIndId != null and secondIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondIndId in ($&#123;secondIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and dateTime in ('0000-00-00')</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"shopType != null and shopType.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and shopType in ($&#123;shopType&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--成交单量查询条件，shopType限制要转化为isLogic限制--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"dealWhere"</span>&gt;</span></span><br><span class="line">        where dateTime <span class="symbol">&amp;gt;</span>= #&#123;sTime&#125; and dateTime <span class="symbol">&amp;lt;</span>= #&#123;eTime&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"thirdIndId != null and thirdIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and thirdIndId in ($&#123;thirdIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondIndId != null and secondIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondIndId in ($&#123;secondIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"terminalId != null and terminalId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and terminalId in ($&#123;terminalId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"shopType != null and shopType.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and shopType in ($&#123;shopType&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--成交访问品牌店铺数查询条件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"dealVisitedWhere"</span>&gt;</span></span><br><span class="line">        where dateTime <span class="symbol">&amp;gt;</span>= #&#123;sTime&#125; and dateTime <span class="symbol">&amp;lt;</span>= #&#123;eTime&#125;</span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"thirdIndId != null and thirdIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and thirdIndId in ($&#123;thirdIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"secondIndId != null and secondIndId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and secondIndId in ($&#123;secondIndId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"shopType != null and shopType.length()&gt;0"</span>&gt;</span></span><br><span class="line">            and shopType in ($&#123;shopType&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--剔除指定店铺--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"dropShop"</span>&gt;</span></span><br><span class="line">        and shopId not in ('10278978','11810231','11624131','11574099','11444736')</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--指定品牌--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"spBrand"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"brandId != null and brandId.length()&gt;0"</span>&gt;</span></span><br><span class="line">            where BrandId in ($&#123;brandId&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--过滤店铺ID小于等于0的店铺--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"shopFilter"</span>&gt;</span></span><br><span class="line">        and toInt32(shopId) &gt; 0</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--排序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"orderBy"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"orderBy != null and orderBy.length()&gt;0"</span>&gt;</span></span><br><span class="line">            order by $&#123;orderBy&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--翻页--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"limit"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"rowNum &gt;0 "</span>&gt;</span></span><br><span class="line">            limit $&#123;(pageNum-1)*rowNum&#125;,$&#123;rowNum&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"database"</span>&gt;</span>bc_online.<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"detTable"</span>&gt;</span>ck_zh_industry_product_union_all_agg_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"brandDict"</span>&gt;</span>mainbrand_dic<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"shopFollowTable"</span>&gt;</span>ck_zh_industry_shop_follow_agg_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"bottomTable"</span>&gt;</span>ck_zh_industry_product_union_all_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"searchTable"</span>&gt;</span>ck_industry_catg_search_click_num_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"brandShopTable"</span>&gt;</span>ck_industry_catg_brand_shop_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"dealTable"</span>&gt;</span>ck_product_deal_detail_d<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Mybatis/" rel="tag"><i class="fa fa-tag"></i> Mybatis</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2022/10/14/%E5%95%86%E6%99%BA%E7%A6%BB%E7%BA%BF_ck%E6%9C%8D%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8E%A5%E5%8F%A3service%E5%B1%82%E5%92%8Cdao%E5%B1%82%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%981/" rel="next" title="商智离线_ck服务弹性接口service层和dao层设计实战1">
                <i class="fa fa-chevron-left"></i> 商智离线_ck服务弹性接口service层和dao层设计实战1
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2022/10/27/HiveSQL%E5%AE%9E%E6%88%98%E7%A7%AF%E7%B4%AF(4)_%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2/" rel="prev" title="HiveSQL实战积累(4)_日期转换">
                HiveSQL实战积累(4)_日期转换 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/head.jpg"
                alt="zju岩手县小森" />
            
              <p class="site-author-name" itemprop="name">zju岩手县小森</p>
              <p class="site-description motion-element" itemprop="description">看的远固然重要 但是走好眼前的路才是关键</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">105</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">102</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://www.instagram.com/littleforestjia" target="_blank" title="Instagram">
                      Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://space.bilibili.com/29623500" target="_blank" title="Bilibili">
                      Bilibili</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#商智离线-ck服务弹性接口service层和dao层设计实战2"><span class="nav-number">1.</span> <span class="nav-text">商智离线_ck服务弹性接口service层和dao层设计实战2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-背景"><span class="nav-number">1.1.</span> <span class="nav-text">1.背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-接口文档设计"><span class="nav-number">1.2.</span> <span class="nav-text">2.接口文档设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-创建dao层param类"><span class="nav-number">1.3.</span> <span class="nav-text">3.创建dao层param类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-创建dao层的mapper接口类"><span class="nav-number">1.4.</span> <span class="nav-text">4.创建dao层的mapper接口类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-创建继承整个微服务抽象类的service方法"><span class="nav-number">1.5.</span> <span class="nav-text">5.创建继承整个微服务抽象类的service方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-创建ReqUtils类与工具方法"><span class="nav-number">1.6.</span> <span class="nav-text">6.创建ReqUtils类与工具方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-写出一个接口查询全量指标的sql"><span class="nav-number">1.7.</span> <span class="nav-text">7.写出一个接口查询全量指标的sql</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#getBrandIndCateSummary"><span class="nav-number">1.7.1.</span> <span class="nav-text">getBrandIndCateSummary</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getBrandIndCateTrend"><span class="nav-number">1.7.2.</span> <span class="nav-text">getBrandIndCateTrend</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-创建IndustryRankUtil类与工具方法"><span class="nav-number">1.8.</span> <span class="nav-text">8.创建IndustryRankUtil类与工具方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-创建dao层的mapper-xml配置文件"><span class="nav-number">1.9.</span> <span class="nav-text">11.创建dao层的mapper.xml配置文件</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zju岩手县小森</span>

  
</div>















        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
